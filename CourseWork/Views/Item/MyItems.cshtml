@using CourseWork.Domain.ViewModels.Shared;
@model IEnumerable<CourseWork.Domain.ViewModels.Item.ItemViewModel>

@{
    ViewData["Title"] = "MyItems";
}

@{
	var pageSize = Constants.ITEMS_PER_PAGE;
	var query = Context.Request.Query.ToDictionary(x => x.Key, x => x.Value.ToString())
										.GetValueOrDefault("pageId");
	int pageId = string.IsNullOrWhiteSpace(query) ? 1 : int.Parse(query);

	var items = Model.Skip((pageId - 1) * pageSize).Take(pageSize);
	var pagination = new Pagination(Model.Count(), pageId, pageSize);
}

@if (Model.Any())
{
	<h1 class="text-center m-4">Мои айтемы</h1>
	<div class="row">
		@foreach (var item in Model)
		{
			<div class="col-10 col-sm-6 col-md-6 col-lg-4 p-2">
				<a href="/Item/GetItem/@item.Id">
					<div class="gallery-item">
						<div class="object-fit">
							<img src="data:image/gif;base64,R0lGODlhBwAFAIAAAP///wAAACH5BAEAAAEALAAAAAAHAAUAAAIFjI+puwUAOw=="
						 data-src="@item.ImgRef"
						 alt="image"
						 class="item-cover lazy">
						</div>
						<div class="gallery-item-info">
							<ul>
								<li class="gallery-item-likes">
									<span class="visualy-hidden">Likes: <i class="fa-solid fa-heart"></i> @item.LikesCount</span>
								</li>
								<li class="gallery-items-comments">
									<span class="visualy-hidden">Comments: <i class="fa-solid fa-comment"></i> @item.CommentsCount</span>
								</li>
							</ul>
						</div>
					</div>
				</a>
			</div>
		}
	</div>
	<div class="ml-2">
		<partial name="_paginationPartial" for="@pagination" />
	</div>
}
else
{
	<h3 class="text-center text-dark">Ничего не найдено</h3>
}

@section Scripts {
	<script>
		var lazyLoadInstance = new LazyLoad({
			elements_selector: ".lazy"
		});
	</script>
}

